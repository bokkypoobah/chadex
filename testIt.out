

  Chadex

      beforeEach
        --- Setup Tokens and Chadex Contracts. Assuming gasPrice: 10.0 gwei, ethUsd: 2500.0 ---
      Mapping contract 0x5FbDB2315678afecb367f032d93F642f64180aa3 => Token0:0x5FbD
        Token0 deployed: 0x5FbDB2315678afecb367f032d93F642f64180aa3
      Mapping contract 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512 => Token1:0xe7f1
        Token1 deployed: 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
      Mapping contract 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0 => WETH:0x9fE4
        WETH deployed: 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
      Mapping contract 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9 => Chadex:0xCf7E
        Chadex deployed: 0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9
        > Transfer Token0 - gasUsed: 51394 ~ ETH 0.00051394 ~ USD 1
        + Token0:0x5FbD ["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"]
        > Transfer Token0 - gasUsed: 51382 ~ ETH 0.00051382 ~ USD 1
        + Token0:0x5FbD ["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc"]
        > Transfer Token0 - gasUsed: 51394 ~ ETH 0.00051394 ~ USD 1
        + Token0:0x5FbD ["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266","0x00000000000000000000000090f79bf6eb2c4f870365e785982e1f101e93b906"]
        > Transfer Token0 - gasUsed: 46594 ~ ETH 0.00046594 ~ USD 1
        + Token0:0x5FbD ["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266","0x00000000000000000000000015d34aaf54267db7d7c367839aaf71a00a2c6a65"]
        Tokens transferred
        > Transfer Token1 - gasUsed: 51394 ~ ETH 0.00051394 ~ USD 1
        + Token1:0xe7f1 ["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"]
        > Transfer Token1 - gasUsed: 51382 ~ ETH 0.00051382 ~ USD 1
        + Token1:0xe7f1 ["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc"]
        > Transfer Token1 - gasUsed: 51394 ~ ETH 0.00051394 ~ USD 1
        + Token1:0xe7f1 ["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266","0x00000000000000000000000090f79bf6eb2c4f870365e785982e1f101e93b906"]
        > Transfer Token1 - gasUsed: 46594 ~ ETH 0.00046594 ~ USD 1
        + Token1:0xe7f1 ["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb92266","0x00000000000000000000000015d34aaf54267db7d7c367839aaf71a00a2c6a65"]
        > Send weth - gasUsed: 44784 ~ ETH 0.00044784 ~ USD 1
        + WETH:0x9fE4 ["0xe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"]
        > Send weth - gasUsed: 44784 ~ ETH 0.00044784 ~ USD 1
        + WETH:0x9fE4 ["0xe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc"]
        > Send weth - gasUsed: 44784 ~ ETH 0.00044784 ~ USD 1
        + WETH:0x9fE4 ["0xe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c","0x00000000000000000000000090f79bf6eb2c4f870365e785982e1f101e93b906"]
        > Send weth - gasUsed: 44784 ~ ETH 0.00044784 ~ USD 1
        + WETH:0x9fE4 ["0xe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c","0x00000000000000000000000015d34aaf54267db7d7c367839aaf71a00a2c6a65"]
        > user0->token0.approve(chadex, 10.0) - gasUsed: 46151 ~ ETH 0.00046151 ~ USD 1
        + Token0:0x5FbD ["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8","0x000000000000000000000000cf7ed3acca5a467e9e704c703e8d87f634fb0fc9"]
        > user0->token1.approve(chadex, 10.0) - gasUsed: 46151 ~ ETH 0.00046151 ~ USD 1
        + Token1:0xe7f1 ["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8","0x000000000000000000000000cf7ed3acca5a467e9e704c703e8d87f634fb0fc9"]
        > user0->weth.approve(chadex, 2.69) - gasUsed: 46174 ~ ETH 0.00046174 ~ USD 1
        + WETH:0x9fE4 ["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8","0x000000000000000000000000cf7ed3acca5a467e9e704c703e8d87f634fb0fc9"]
        > user1->token0.approve(chadex, 10.0) - gasUsed: 46151 ~ ETH 0.00046151 ~ USD 1
        + Token0:0x5FbD ["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc","0x000000000000000000000000cf7ed3acca5a467e9e704c703e8d87f634fb0fc9"]
        > user1->token1.approve(chadex, 10.0) - gasUsed: 46151 ~ ETH 0.00046151 ~ USD 1
        + Token1:0xe7f1 ["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc","0x000000000000000000000000cf7ed3acca5a467e9e704c703e8d87f634fb0fc9"]
        > user1->weth.approve(chadex, 2.69) - gasUsed: 46174 ~ ETH 0.00046174 ~ USD 1
        + WETH:0x9fE4 ["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x0000000000000000000000003c44cdddb6a900fa2b585dd299e03d12fa4293bc","0x000000000000000000000000cf7ed3acca5a467e9e704c703e8d87f634fb0fc9"]
        > user2->token0.approve(chadex, 10.0) - gasUsed: 46151 ~ ETH 0.00046151 ~ USD 1
        + Token0:0x5FbD ["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000090f79bf6eb2c4f870365e785982e1f101e93b906","0x000000000000000000000000cf7ed3acca5a467e9e704c703e8d87f634fb0fc9"]
        > user2->token1.approve(chadex, 10.0) - gasUsed: 46151 ~ ETH 0.00046151 ~ USD 1
        + Token1:0xe7f1 ["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000090f79bf6eb2c4f870365e785982e1f101e93b906","0x000000000000000000000000cf7ed3acca5a467e9e704c703e8d87f634fb0fc9"]
        > user2->weth.approve(chadex, 2.69) - gasUsed: 46174 ~ ETH 0.00046174 ~ USD 1
        + WETH:0x9fE4 ["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000090f79bf6eb2c4f870365e785982e1f101e93b906","0x000000000000000000000000cf7ed3acca5a467e9e704c703e8d87f634fb0fc9"]
        > user3->token0.approve(chadex, 10.0) - gasUsed: 46151 ~ ETH 0.00046151 ~ USD 1
        + Token0:0x5FbD ["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000015d34aaf54267db7d7c367839aaf71a00a2c6a65","0x000000000000000000000000cf7ed3acca5a467e9e704c703e8d87f634fb0fc9"]
        > user3->token1.approve(chadex, 10.0) - gasUsed: 46151 ~ ETH 0.00046151 ~ USD 1
        + Token1:0xe7f1 ["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000015d34aaf54267db7d7c367839aaf71a00a2c6a65","0x000000000000000000000000cf7ed3acca5a467e9e704c703e8d87f634fb0fc9"]
        > user3->weth.approve(chadex, 2.69) - gasUsed: 46174 ~ ETH 0.00046174 ~ USD 1
        + WETH:0x9fE4 ["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000015d34aaf54267db7d7c367839aaf71a00a2c6a65","0x000000000000000000000000cf7ed3acca5a467e9e704c703e8d87f634fb0fc9"]
      00. Test 00 - Happy Path - Specified Set
        Executing: [
  {
    "action": 2,
    "buySell": 0,
    "tokenz": [
      "0x5FbDB2315678afecb367f032d93F642f64180aa3",
      "0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0"
    ],
    "price": "690100000",
    "targetPrice": "690100000",
    "expiry": 1728547750,
    "tokens": "1000000000000000000",
    "skipCheck": false
  },
  {
    "action": 2,
    "buySell": 0,
    "tokenz": [
      "0x5FbDB2315678afecb367f032d93F642f64180aa3",
      "0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0"
    ],
    "price": "690200000",
    "targetPrice": "690200000",
    "expiry": 1728547750,
    "tokens": "2000000000000000000",
    "skipCheck": false
  },
  {
    "action": 2,
    "buySell": 0,
    "tokenz": [
      "0x5FbDB2315678afecb367f032d93F642f64180aa3",
      "0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0"
    ],
    "price": "690300000",
    "targetPrice": "690300000",
    "expiry": 1728547750,
    "tokens": "3000000000000000000",
    "skipCheck": false
  }
]
        > user0->chadex.execute(actionsA) - gasUsed: 620494 ~ ETH 0.00620494 ~ USD 15
        + Chadex:0xCf7E ["0xf22d70a8ebd78c56629182f34470e7b55c3b5b82766457d1b398c9bca2a9b17c","0x2c831da670a13afa44000f723f930fbd31948192e5612f758ae2cfaeee460dc2","0x0000000000000000000000005fbdb2315678afecb367f032d93f642f64180aa3","0x0000000000000000000000009fe46736679d2d9a65f0992f2272de9f3c7fa6e0"]
        + Chadex:0xCf7E ["0x6b1f92adce775bf96605560854f4155222863d3da4ca154334b48838fbeff55e","0x2c831da670a13afa44000f723f930fbd31948192e5612f758ae2cfaeee460dc2","0xba50bff8ca4fde497871699eeb406f4cbadb4501c87b7dffb82bd406d51af64f","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"]
        + Chadex:0xCf7E ["0x6b1f92adce775bf96605560854f4155222863d3da4ca154334b48838fbeff55e","0x2c831da670a13afa44000f723f930fbd31948192e5612f758ae2cfaeee460dc2","0x16ee2eb820c1dc86c5312b30df62429a70bf02e7ad9502c64f1bf72332f2d52c","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"]
        + Chadex:0xCf7E ["0x6b1f92adce775bf96605560854f4155222863d3da4ca154334b48838fbeff55e","0x2c831da670a13afa44000f723f930fbd31948192e5612f758ae2cfaeee460dc2","0x216071ecd309e02f0a7c41a681f63c840beb698b2aedb288198fa4cb3667138e","0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"]
    ✔ 00. Test 00


  1 passing (515ms)

